set timeout 5
set port [lindex $argv 0]
set filename [lindex $argv 1]
set expected_msg "Неверное количество вершин"

log_user 0

spawn ./client 127.0.0.1 tcp $port
expect "> "
send "load $filename\r"

expect {
    -re "Неверное количество.*" { exit 0 }
    timeout { puts "TIMEOUT"; exit 1 }
    "Граф успешно загружен" { puts "Граф загрузился, а не должен был"; exit 1 }
}
