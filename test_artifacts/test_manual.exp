set timeout 5
set port [lindex $argv 0]
log_user 0

spawn ./client 127.0.0.1 tcp $port
expect "> "
send "input\r"
expect "Введите данные:"
# Граф 6 вершин, кольцо
send "6 6\r"
send "1 0 0 0 0 1\r"
send "1 1 0 0 0 0\r"
send "0 1 1 0 0 0\r"
send "0 0 1 1 0 0\r"
send "0 0 0 1 1 0\r"
send "0 0 0 0 1 1\r"
send "1 1 1 1 1 1\r\r" 

expect "Граф успешно загружен"
expect "> "
send "query 0 3\r"
# В кольце из 6 вершин (веса 1) путь от 0 до 3 равен 3
expect {
    -re "Длина пути.*3" { exit 0 }
    timeout { puts "TIMEOUT manual check"; exit 1 }
}
